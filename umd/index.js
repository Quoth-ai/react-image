(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports,require("@babel/runtime/helpers/defineProperty"),require("@babel/runtime/helpers/objectWithoutPropertiesLoose"),require("react")):"function"==typeof define&&define.amd?define(["exports","@babel/runtime/helpers/defineProperty","@babel/runtime/helpers/objectWithoutPropertiesLoose","react"],b):(a="undefined"==typeof globalThis?a||self:globalThis,b(a.Img={},a._defineProperty,a._objectWithoutPropertiesLoose,a.React))})(this,function(a,b,c,d){"use strict";function e(a){return a&&"object"==typeof a&&"default"in a?a:{default:a}}function f(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function g(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?f(Object(b),!0).forEach(function(c){l["default"](a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):f(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function h(a){var b=a.srcList,c=a.imgPromise,e=a.useSuspense,f=void 0===e||e,h=a.loadTimeout,i=null==c?o({decode:!0,loadTimeout:h}):c,j=d.useState(!0),k=j[1],l=p(q(b)),m=l.join("");if(r[m]||(r[m]={promise:s(l,i),cache:"pending",error:null}),r[m].promise.then(function(a){r[m]=g(g({},r[m]),{},{cache:"resolved",src:a}),f||k(!1)})["catch"](function(a){r[m]=g(g({},r[m]),{},{cache:"rejected",error:a}),f||k(!1)}),"resolved"===r[m].cache)return{src:r[m].src,isLoading:!1,error:null};if("rejected"===r[m].cache){if(f)throw r[m].error;return{isLoading:!1,error:r[m].error,src:void 0}}if(f)throw r[m].promise;return{isLoading:!0,src:void 0,error:null}}function j(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function k(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?j(Object(b),!0).forEach(function(c){l["default"](a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):j(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}var l=e(b),m=e(c),n=e(d),o=function(a){var b=a.decode,c=a.crossOrigin,d=void 0===c?"":c,e=a.loadTimeout;return function(a,c){return new Promise(function(f,g){var h,j=new Image;d&&(j.crossOrigin=d),j.onload=function(){clearTimeout(h),(!(void 0!==b)||b)&&j.decode?j.decode().then(f)["catch"](g):f()},j.onerror=g,j.src=a,e&&!c&&(h=setTimeout(function(){j.src="",g()},e))})}},p=function(b){return b.filter(function(a){return a})},q=function(a){return Array.isArray(a)?a:[a]},r={},s=function(a,b){var c=a.length,d=!1;return new Promise(function(e,f){var g=function(a,c){return b(a,c).then(function(){d=!0,e(a)})};a.reduce(function(a,b,e){return a["catch"](function(){if(!d)return g(b,e+1===c-1)})},g(a.shift(),1===c))["catch"](f)})},t=["decode","src","loader","unloader","container","loaderContainer","unloaderContainer","imgPromise","crossorigin","useSuspense","loadTimeout"],u=function(a){return a};a.Img=function(a){var b=a.decode,c=a.src,d=void 0===c?[]:c,e=a.loader,f=void 0===e?null:e,g=a.unloader,i=void 0===g?null:g,j=a.container,l=void 0===j?u:j,p=a.loaderContainer,q=void 0===p?u:p,r=a.unloaderContainer,s=void 0===r?u:r,v=a.imgPromise,w=a.crossorigin,x=a.useSuspense,y=void 0!==x&&x,z=a.loadTimeout,A=void 0===z?null:z,B=m["default"](a,t);v=v||o({decode:!(void 0!==b)||b,crossOrigin:w,loadTimeout:A});var C=h({srcList:d,imgPromise:v,useSuspense:y}),D=C.src,E=C.isLoading;return D?l(n["default"].createElement("img",k({src:D},B))):!y&&E?q(f):!y&&i?s(i):null},a.useImage=h,Object.defineProperty(a,"__esModule",{value:!0})});
//# sourceMappingURL=index.js.map
